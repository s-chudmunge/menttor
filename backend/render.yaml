services:
  - type: web
    name: menttor-backend
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: ./start.sh
    envVars:
      # Cloud SQL Configuration
      - key: USE_CLOUD_SQL_AUTH_PROXY
        value: true
      - key: GOOGLE_CLOUD_PROJECT_ID
        sync: false  # Set manually in Render dashboard
      - key: CLOUD_SQL_INSTANCE_NAME
        value: menttor-db-instance
      - key: CLOUD_SQL_REGION
        value: asia-south1
      - key: GOOGLE_APPLICATION_CREDENTIALS_JSON
        sync: false  # Set manually in Render dashboard (sensitive)
      
      # Database Configuration
      - key: POSTGRES_USER
        value: admin-db
      - key: POSTGRES_PASSWORD
        sync: false  # Set manually (sensitive)
      - key: POSTGRES_DB
        value: menttor-db
      
      # Application Configuration
      - key: ENVIRONMENT
        value: production
      - key: DATABASE_ECHO
        value: false
      
      # CORS Configuration
      - key: CORS_ALLOWED_ORIGINS
        value: http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000,http://127.0.0.1:3001,https://menttor.live,https://www.menttor.live
      
      # API Keys (set these manually in Render dashboard)
      - key: SECRET_KEY
        sync: false
      - key: REFRESH_SECRET_KEY
        sync: false
      - key: OPENROUTER_API_KEY
        sync: false
      - key: HUGGINGFACE_HUB_TOKEN
        sync: false
      - key: VERTEX_AI_PROJECT_ID
        sync: false
      - key: GOOGLE_CLIENT_ID
        sync: false
      - key: GOOGLE_CLIENT_SECRET
        sync: false
      
      # Firebase Configuration (set these manually)
      - key: FIREBASE_PROJECT_ID
        sync: false
      - key: FIREBASE_PRIVATE_KEY
        sync: false
      - key: FIREBASE_CLIENT_EMAIL
        sync: false